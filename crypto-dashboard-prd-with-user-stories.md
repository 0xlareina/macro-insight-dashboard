# 加密市场监控面板 - 产品需求文档(PRD) + 用户故事

## 1. 文档信息

- **文档版本**: V1.4
- **创建日期**: 2024-12
- **产品名称**: CryptoSense Dashboard - Core Edition
- **文档状态**: Draft with User Stories
- **产品负责人**: [待填写]
- **技术负责人**: [待填写]
- **最后更新**: 2024-12 (新增用户故事)

## 2. 产品概述

### 2.1 产品定位
CryptoSense Dashboard Core Edition是一个专注于主流加密货币（BTC、ETH、SOL）的专业监控面板，通过精简但深度的数据分析，为交易者提供核心资产的实时市场洞察和风险预警。

### 2.2 核心价值
- **精准聚焦**: 专注三大主流资产，提供更深度的分析
- **极简高效**: 减少信息噪音，提升决策效率
- **实时响应**: 毫秒级数据更新，捕捉市场机会
- **专业深度**: 每个币种都有完整的现货、衍生品、链上数据覆盖

### 2.3 目标用户
- 专业加密货币交易者
- 量化交易团队
- 加密基金分析师
- DeFi协议风控人员

### 2.4 使用场景
- 日常市场监控与分析
- 交易前风险评估
- 极端行情预警响应
- 投资策略回测验证

## 3. 功能需求 + 用户故事

### 3.1 数据源集成

#### 3.1.1 传统市场数据源
| 数据类型 | 数据源 | 更新频率 | 优先级 |
|---------|--------|----------|--------|
| VIX指数 | CBOE/Yahoo Finance | 1分钟 | P0 |
| 美股指数 | Yahoo Finance/Alpha Vantage | 1分钟 | P0 |
| 黄金价格 | Kitco/Investing.com | 5分钟 | P1 |
| 美元指数 | TradingView/Investing.com | 5分钟 | P1 |
| 美债收益率 | Treasury.gov/FRED | 15分钟 | P1 |
| ETF资金流 | Bloomberg/ETF.com | 日更新 | P0 |

#### 3.1.2 加密市场数据源
| 数据类型 | 数据源 | 更新频率 | 优先级 |
|---------|--------|----------|--------|
| 现货价格 | Binance/Coinbase API | 实时 | P0 |
| 资金费率 | Binance API | 1分钟 | P0 |
| 持仓量 | Binance/Coinglass API | 5分钟 | P0 |
| 爆仓数据 | Binance/Coinglass | 实时 | P0 |
| 恐慌贪婪指数 | Alternative.me API | 1小时 | P0 |
| 期权数据 | Deribit API | 5分钟 | P1 |
| 稳定币数据 | CoinGecko/DeFiLlama | 5分钟 | P0 |

#### 3.1.3 链上数据源
| 数据类型 | 数据源 | 更新频率 | 优先级 |
|---------|--------|----------|--------|
| 链上转账 | Etherscan/Blockchain.info | 实时 | P0 |
| 交易所流向 | Glassnode/CryptoQuant | 10分钟 | P1 |
| Gas费用 | Etherscan/GasNow | 1分钟 | P1 |
| DeFi TVL | DeFiLlama/DeFiPulse | 5分钟 | P1 |

### 3.2 核心功能模块 + 用户故事

#### 3.2.1 市场情绪监控模块

**功能描述**: 综合展示市场情绪指标和机构资金流向

##### 用户故事 1.1: 恐慌贪婪指数显示
```
用户角色: 加密货币交易者
需求: 我想要看到当前恐慌贪婪指数的大型仪表盘显示
目的: 以便我能快速评估整体市场情绪

验收标准:
✓ 以大号、易读字体显示当前指数值
✓ 显示颜色编码区间：0-25(深红)、26-45(红)、46-55(黄)、56-75(浅绿)、76-100(深绿)
✓ 每小时自动更新指数值
✓ 显示指数构成因子及其各自权重
✓ 包含7/30/90天历史趋势图
✓ 在趋势图上标记历史极值
```

##### 用户故事 1.2: ETF资金流向追踪
```
用户角色: 专业加密分析师
需求: 我想要监控美国现货比特币ETF的实时资金流向
目的: 以便了解机构资金动向及其对BTC价格的影响

验收标准:
✓ 大字体高亮显示每日净流入/流出总额
✓ 按单个ETF分解显示（IBIT、FBTC、ARKB、BITB等）
✓ 提供7/30天和总历史累计流向图表
✓ 显示ETF持仓量排名，包含BTC数量和日变化
✓ 显示资金流向与BTC价格走势的相关性图表
✓ 在市场时间内实时更新数据
```

##### 用户故事 1.3: 综合情绪评分
```
用户角色: 量化交易员
需求: 我想要一个结合恐贪指数、ETF流向和资金费率的复合情绪评分
目的: 以便获得市场状况的整体视图来指导我的交易决策

验收标准:
✓ 基于多个情绪指标计算加权复合评分
✓ 显示市场状态分类：超买/超卖/中性
✓ 基于情绪分析提供可操作的交易建议
✓ 显示基于情绪信号的历史表现
✓ 允许自定义指标权重
```

**显示指标**:

**恐慌贪婪指数仪表盘**:
- 当前指数值（0-100）大型仪表图
  - 0-25：极度恐慌（深红色）
  - 25-45：恐慌（红色）
  - 45-55：中性（黄色）
  - 55-75：贪婪（浅绿色）
  - 75-100：极度贪婪（深绿色）
- 指数构成因子展示
  - 波动性（25%权重）
  - 市场动量/成交量（25%）
  - 社交媒体热度（15%）
  - 市场调查（15%）
  - BTC占比（10%）
  - 谷歌趋势（10%）
- 历史趋势图（7天/30天/90天）
- 历史极值标记

**美国现货ETF资金流向面板**:
- 当日净流入/流出金额（实时更新）
  - 总计净流入（绿色/红色高亮）
  - 分ETF明细（IBIT、FBTC、ARKB、BITB等）
- 累计资金流向图表
  - 7天累计
  - 30天累计
  - 历史总累计
- ETF持仓量排行
  - 各ETF BTC持仓数量
  - 占比饼图
  - 日变化量
- 资金流向与BTC价格相关性图表

**市场情绪综合评分**:
- 结合恐贪指数、ETF流向、资金费率的综合评分
- 市场状态判断：超买/超卖/中性
- 操作建议提示

**交互功能**:
- 时间周期切换
- 数据详情悬停显示
- 历史数据对比功能

#### 3.2.2 现货市场监控模块

**功能描述**: 实时追踪现货市场状态

##### 用户故事 2.1: 实时价格监控
```
用户角色: 日内交易员
需求: 我想要在清晰的表格中看到BTC、ETH和SOL的实时价格
目的: 以便快速比较我主要交易资产的表现

验收标准:
✓ 显示精确到小数点后2位的价格，实时更新
✓ 显示每个资产的24H涨跌幅、成交量和市值
✓ 包含1H/4H/24H时间框架的迷你K线图
✓ 显示买卖订单深度指标
✓ 显示快速技术指标（RSI/MACD）
✓ 支持按不同指标排序（价格变化、成交量、市值）
```

##### 用户故事 2.2: 跨资产表现分析
```
用户角色: 投资组合经理
需求: 我想要比较BTC、ETH和SOL之间的相对强弱
目的: 以便识别哪些资产表现优异，用于轮动策略

验收标准:
✓ 显示相对强弱对比图表
✓ 显示市值百分比随时间变化
✓ 提供交易量分布饼图
✓ 计算资产间相关系数
✓ 用视觉指标突出表现领先者
```

##### 用户故事 2.3: 稳定币流动性仪表盘
```
用户角色: 做市商
需求: 我想要监控USDT和USDC市值变化及交易所储备
目的: 以便评估整体市场流动性状况

验收标准:
✓ 追踪USDT/USDC总市值变化
✓ 按交易对监控交易所储备（BTC/ETH/SOL）
✓ 显示大额链上稳定币转账
✓ 显示主要交易所的流动性分布
✓ 稳定币供应量显著变化时发出警报（>5%）
```

**显示指标**:
- 主流币价格表格（BTC/ETH/SOL）
  - 实时价格（精确到小数点后2位）
  - 24H涨跌幅、成交量、市值
  - 1H/4H/24H迷你K线图
  - 买卖盘深度指标
  - RSI/MACD快速指标
- 市场对比分析
  - BTC/ETH/SOL相对强弱对比
  - 市值占比变化
  - 成交量分布饼图
- 稳定币流动性仪表盘
  - USDT/USDC总市值变化
  - 交易所储备量（分BTC/ETH/SOL交易对）
  - 链上大额转账记录
- 技术指标深度面板
  - 三币种RSI对比热力图
  - 支撑阻力位实时计算
  - 成交量异常检测

**交互功能**:
- 币种自定义添加/删除
- 排序功能（按涨幅/成交量/市值）
- 快速跳转至详细图表

#### 3.2.3 衍生品市场模块

**功能描述**: 监控期货期权市场动态

##### 用户故事 3.1: 资金费率分析
```
用户角色: 永续期货交易员
需求: 我想要BTC、ETH和SOL的详细资金费率分析
目的: 以便识别套利机会和市场情绪变化

验收标准:
✓ 显示所有三种资产的实时资金费率
✓ 显示历史资金费率趋势（24H/7D/30D）
✓ 计算按成交量加权的平均资金费率
✓ 比较Binance和Coinbase的费率
✓ 当费率差异>0.02%时突出显示套利机会
✓ 资金费率超出正常范围时发出警报
```

##### 用户故事 3.2: 未平仓合约追踪
```
用户角色: 期货分析师
需求: 我想要全面的未平仓合约数据和分析
目的: 以便衡量市场杠杆和潜在波动性

验收标准:
✓ 显示总OI和24H百分比变化
✓ 按资产显示实时多空比率
✓ 提供OI与价格相关性图表
✓ 追踪大持有者头寸变化
✓ 显示基差监控（现货vs永续vs季度）
✓ 显示每个资产的期限结构曲线
```

##### 用户故事 3.3: 清算监控
```
用户角色: 风险经理
需求: 我想要实时清算数据和分析
目的: 以便评估市场压力和潜在连锁反应

验收标准:
✓ 显示实时清算瀑布图
✓ 显示24H清算统计，包含多空分解
✓ 提供清算价格分布图
✓ 大额清算时发出警报（>$1M）
✓ 按资产追踪清算模式
✓ 显示关键价格水平附近的清算聚集
```

**显示指标**:

**期货仪表盘**:
- 资金费率深度分析
  - BTC/ETH/SOL当前费率（实时更新）
  - 费率历史走势（24H/7D/30D）
  - 加权平均费率（按持仓量加权）
  - 各交易所费率对比（Binance/Coinbase）
  - 费率套利机会提示
- 持仓量专业分析
  - OI总量及24H变化率
  - 多空比实时显示（分币种）
  - OI/价格相关性图表
  - 大户持仓变化追踪
- 基差监控（现货vs永续vs季度）
  - 实时基差表
  - 基差历史分布图
  - 期限结构曲线

**期权仪表盘**:
- Max Pain价格显示
- Put/Call Ratio走势
- 期权到期日历
- IV Rank/Percentile

**清算监控**:
- 实时爆仓流（瀑布图）
- 24H爆仓统计（多空分布）
- 清算价格分布图
- 大额爆仓提醒（>$1M）

#### 3.2.4 DeFi生态模块

**功能描述**: 监控DeFi协议健康度

##### 用户故事 4.1: 借贷利率监控
```
用户角色: DeFi收益农民
需求: 我想要监控各协议中BTC、ETH和SOL的借贷利率
目的: 以便优化我的收益策略

验收标准:
✓ 显示Aave V3、Compound V3、MakerDAO的借贷APY（ETH主网）
✓ 显示借贷APY和利用率
✓ 包含Solana DeFi利率（Marinade、Solend）
✓ 利率异常飙升时发出警报（>2倍正常值）
✓ 提供历史利率图表
✓ 计算最优借贷策略
```

##### 用户故事 4.2: 清算风险评估
```
用户角色: DeFi借款人
需求: 我想要监控各借贷协议的清算风险
目的: 以便主动管理我的头寸

验收标准:
✓ 按协议显示待清算金额
✓ 显示健康因子分布
✓ 为大额头寸提供清算倒计时
✓ 追踪各协议的总风险价值
✓ 接近清算阈值时发出警报
```

**显示指标**:
- 借贷利率表格
  - 主流币种借贷APY（Aave V3/Compound V3/MakerDAO - 仅Ethereum）
  - 利用率显示
  - 异常利率预警
- 清算风险监控
  - 各协议待清算金额
  - 健康系数分布图
  - 大额清算倒计时
- TVL监控
  - 总TVL及24H变化
  - 各链TVL分布
  - 协议TVL排名

#### 3.2.5 实时预警系统

**功能描述**: 捕捉市场异常信号并及时通知

##### 用户故事 5.1: 价格波动警报
```
用户角色: 活跃交易员
需求: 我想要针对快速市场波动的可自定义价格警报
目的: 以便快速响应交易机会

验收标准:
✓ BTC 5分钟波动>2%、ETH >3%、SOL >5%时发出警报
✓ 支持每个资产的自定义阈值设置
✓ 提供多种通知方式（弹窗、声音、推送）
✓ 显示警报历史和表现统计
✓ 在高波动期间允许临时暂停警报
```

##### 用户故事 5.2: 市场异常检测
```
用户角色: 专业交易员
需求: 我想要自动检测市场异常和极端状况
目的: 以便收到潜在盈利或风险情况的警报

验收标准:
✓ 极端资金费率警报：BTC >0.1%或<-0.05%
✓ 大额清算事件通知（每小时>$50M按资产）
✓ 主要交易所大额流入警报（>100 BTC、>1000 ETH、>10000 SOL）
✓ ETF流向极值通知（每日>$300M）
✓ 恐贪指数极值（<20或>80）和反转警报（>15点变化）
✓ 提供警报优先级和可自定义通知设置
```

**预警类型**:

| 预警项目 | 触发条件 | 优先级 | 通知方式 |
|---------|----------|--------|----------|
| BTC价格急变 | 5分钟涨跌>2% | 高 | 弹窗+声音 |
| ETH价格急变 | 5分钟涨跌>3% | 高 | 弹窗+声音 |
| SOL价格急变 | 5分钟涨跌>5% | 高 | 弹窗+声音 |
| 资金费率异常(BTC) | >0.1%或<-0.05% | 高 | 弹窗+声音 |
| 资金费率异常(ETH/SOL) | >0.15%或<-0.08% | 高 | 弹窗+声音 |
| 大额爆仓 | 单币种1H累计>$50M | 高 | 弹窗+声音 |
| 交易所BTC转入 | 单笔>100 BTC | 中 | 消息提示 |
| 交易所ETH转入 | 单笔>1000 ETH | 中 | 消息提示 |
| 交易所SOL转入 | 单笔>10000 SOL | 中 | 消息提示 |
| ETF大额流入 | 单日流入>$300M | 中 | 消息提示 |
| ETF大额流出 | 单日流出>$300M | 高 | 弹窗提示 |
| 恐贪指数极端 | <20 或 >80 | 中 | 消息提示 |
| 恐贪指数反转 | 24h变化>15点 | 中 | 消息提示 |
| DeFi大额清算 | 单笔>$1M | 中 | 消息提示 |
| 稳定币异常 | 日增减>5% | 低 | 日志记录 |

**预警设置**:
- 自定义阈值设置
- 预警开关控制
- 预警历史记录
- 预警统计分析

### 3.3 数据可视化要求

#### 3.3.1 图表类型规范

| 数据类型 | 推荐图表 | 更新方式 | 交互要求 |
|---------|---------|----------|----------|
| 价格走势 | K线图/折线图 | 实时推送 | 缩放、十字线、标注 |
| 涨跌分布 | 热力图/树状图 | 定时刷新 | 悬停显示详情 |
| 资金流向 | 桑基图/流向图 | 定时刷新 | 点击追踪来源 |
| 相关性 | 散点图/矩阵图 | 定时刷新 | 时间窗口调整 |
| 占比分布 | 饼图/环形图 | 定时刷新 | 点击筛选 |
| 时间序列 | 面积图/折线图 | 实时推送 | 时间轴拖动 |
| 爆仓数据 | 瀑布图/柱状图 | 实时推送 | 自动滚动 |

#### 3.3.2 配色方案

```javascript
const colorScheme = {
  // 主色调
  primary: '#1890ff',      // 主要操作
  success: '#52c41a',      // 上涨/积极
  warning: '#faad14',      // 警告/中性
  danger: '#f5222d',       // 下跌/危险
  
  // 背景色
  bgPrimary: '#0d1117',    // 主背景
  bgSecondary: '#161b22',  // 次级背景
  bgTertiary: '#21262d',   // 三级背景
  
  // 文字色
  textPrimary: '#c9d1d9',  // 主要文字
  textSecondary: '#8b949e',// 次要文字
  textMuted: '#484f58',    // 弱化文字
  
  // 涨跌色
  bull: '#00d084',         // 上涨
  bear: '#ff4757',         // 下跌
  neutral: '#636e72'       // 横盘
}
```

### 3.4 性能要求

#### 3.4.1 响应时间
- 页面首次加载: <3秒
- 数据刷新: <500ms
- 图表渲染: <1秒
- 预警推送延迟: <2秒

#### 3.4.2 并发处理
- 支持同时处理20+数据源
- WebSocket连接数: >10
- 支持1000+用户同时在线

#### 3.4.3 数据缓存
- 历史数据本地缓存
- 实时数据内存缓存
- 缓存更新策略: LRU

### 3.5 用户体验设计

#### 3.5.1 布局设计

```
┌─────────────────────────────────────────────────────┐
│                    顶部导航栏                         │
│  Logo | BTC | ETH | SOL | 衍生品 | DeFi | 预警 | 设置 │
├─────────────────────────────────────────────────────┤
│                  关键指标条                           │
│ BTC: $96,543 (+2.3%) | ETH: $3,456 | SOL: $187 |     │
│ 恐贪指数: 72 (贪婪) | ETF净流入: +$234M | 资金费率: 0.012% │
├──────────────┬──────────────────┬───────────────────┤
│              │                  │                   │
│   左侧面板    │    主显示区      │    右侧面板       │
│              │                  │                   │
│  币种切换     │   深度图表       │   实时数据流      │
│  快速指标     │   K线图          │   爆仓监控        │
│  费率对比     │   技术分析       │   大额转账        │
│              │                  │                   │
└──────────────┴──────────────────┴───────────────────┘
```

#### 3.5.2 币种快速切换设计
```
BTC | ETH | SOL 标签页设计：
- 每个标签包含：币种logo、价格、24h涨幅
- 选中状态：蓝色底边框 + 背景高亮
- 支持快捷键切换：Alt+1(BTC), Alt+2(ETH), Alt+3(SOL)
- 单击切换所有图表到对应币种
```

#### 3.5.3 交互设计原则
- **即时反馈**: 所有操作立即响应
- **渐进展示**: 重要信息优先加载
- **智能提示**: 异常值自动高亮
- **快捷操作**: 支持键盘快捷键
- **个性定制**: 支持布局自定义

### 3.6 技术架构建议

#### 3.6.1 前端技术栈
```javascript
{
  framework: 'React 18 / Vue 3',
  stateManagement: 'Redux Toolkit / Pinia',
  charts: 'TradingView Charting Library / ECharts',
  realtime: 'Socket.IO / Native WebSocket',
  ui: 'Ant Design / Element Plus',
  build: 'Vite',
  language: 'TypeScript'
}
```

#### 3.6.2 后端技术栈
```javascript
{
  runtime: 'Node.js / Python',
  framework: 'NestJS / FastAPI',
  database: 'PostgreSQL + Redis + InfluxDB',
  messageQueue: 'RabbitMQ / Kafka',
  cache: 'Redis',
  websocket: 'Socket.IO / ws'
}
```

#### 3.6.3 数据处理架构
```
数据源 -> 数据采集层 -> 消息队列 -> 数据处理层 -> 存储层 -> API层 -> 前端
         ↓                                    ↓
    数据验证/清洗                          缓存层(Redis)
```

## 4. 非功能性需求

### 4.1 安全性要求
- API密钥加密存储
- HTTPS传输加密
- 访问权限控制
- 操作审计日志
- DDoS防护

### 4.2 可靠性要求
- 系统可用性: >99.9%
- 数据源故障切换
- 自动重连机制
- 数据备份策略
- 灾难恢复计划

### 4.3 可扩展性要求
- 模块化设计
- 插件化架构
- API标准化
- 微服务支持
- 水平扩展能力

### 4.4 可维护性要求
- 完整日志系统
- 监控告警体系
- 自动化测试
- 文档完整性
- 版本管理

## 5. 项目计划

### 5.1 开发阶段

| 阶段 | 时间 | 交付内容 | 里程碑 |
|------|------|---------|--------|
| Phase 1 | Week 1-2 | 技术选型、架构设计 | 技术方案确定 |
| Phase 2 | Week 3-4 | 数据采集层开发 | 数据源接入完成 |
| Phase 3 | Week 5-8 | 核心功能开发 | MVP版本 |
| Phase 4 | Week 9-10 | 预警系统开发 | 预警功能上线 |
| Phase 5 | Week 11-12 | 测试与优化 | Beta版本 |
| Phase 6 | Week 13-14 | 部署与监控 | 正式上线 |

### 5.2 MVP功能范围（BTC/ETH/SOL核心版）
- 三币种实时价格监控
- 恐慌贪婪指数仪表盘
- ETF资金流向追踪（实时更新）
- 资金费率实时追踪（BTC/ETH/SOL）
- 爆仓数据展示（分币种统计）
- 深度图表（50档盘口）
- 基础预警功能（价格、费率、情绪、ETF）
- 币种间相对强弱对比

### 5.3 迭代计划
- V1.1: 增加更多币种支持
- V1.2: DeFi模块完善
- V1.3: 策略回测功能
- V2.0: AI辅助分析

## 6. 风险与依赖

### 6.1 技术风险
- 数据源API限流
- 实时数据延迟
- 高并发处理瓶颈
- 图表渲染性能

### 6.2 业务风险
- 数据源收费/关闭
- 监管政策变化
- 市场极端行情
- 竞品竞争

### 6.3 外部依赖
- 交易所API稳定性
- 第三方数据服务
- 云服务可用性
- 网络连接质量

## 7. 成功指标

### 7.1 技术指标
- 数据延迟 <2秒
- 系统可用性 >99.9%
- 并发用户 >1000
- 页面加载 <3秒

### 7.2 业务指标
- 日活用户 >500
- 用户留存率 >60%
- 预警准确率 >80%
- 用户满意度 >4.5/5

## 8. 用户故事总结

### 8.1 用户故事统计
- **总计**: 12个用户故事
- **市场情绪模块**: 3个故事
- **现货市场模块**: 3个故事  
- **衍生品模块**: 3个故事
- **DeFi模块**: 2个故事
- **预警系统**: 1个故事

### 8.2 用户角色分析
- **交易员** (日内交易员、期货交易员、活跃交易员): 4个故事
- **分析师** (专业分析师、期货分析师): 2个故事
- **投资经理** (投资组合经理、风险经理): 2个故事
- **专业用户** (量化交易员、做市商、DeFi用户): 4个故事

### 8.3 优先级建议
**高优先级 (MVP必需)**:
- 用户故事 1.1: 恐慌贪婪指数显示
- 用户故事 1.2: ETF资金流向追踪  
- 用户故事 2.1: 实时价格监控
- 用户故事 3.1: 资金费率分析
- 用户故事 5.1: 价格波动警报

**中优先级 (V1.1版本)**:
- 用户故事 1.3: 综合情绪评分
- 用户故事 2.2: 跨资产表现分析
- 用户故事 3.2: 未平仓合约追踪
- 用户故事 5.2: 市场异常检测

**低优先级 (后续版本)**:
- 用户故事 2.3: 稳定币流动性仪表盘
- 用户故事 3.3: 清算监控
- 用户故事 4.1: 借贷利率监控
- 用户故事 4.2: 清算风险评估

## 9. 附录

### 9.1 名词解释
- **OI (Open Interest)**: 未平仓合约量
- **Max Pain**: 期权最大痛点
- **TVL (Total Value Locked)**: 总锁仓价值
- **APY (Annual Percentage Yield)**: 年化收益率
- **GBTC**: Grayscale Bitcoin Trust

### 9.2 数据源API文档
- Binance API: https://binance-docs.github.io/apidocs/
- Coinbase API: https://docs.cdp.coinbase.com/
- Alternative.me (恐贪指数): https://alternative.me/crypto/fear-and-greed-index/
- Farside Investors (ETF流向): https://farside.co.uk/
- Deribit API: https://docs.deribit.com/
- Glassnode API: https://docs.glassnode.com/
- DeFiLlama API: https://defillama.com/docs/api

### 9.3 竞品参考
- Coinglass
- Glassnode Studio  
- Nansen
- Dune Analytics
- TradingView

### 9.4 设计参考
- 颜色方案参考: TradingView Dark Theme
- 布局参考: Bloomberg Terminal
- 交互参考: Binance Futures

## 10. 数据范围限定

### 10.1 币种监控范围

**核心监控币种（3个）**：
```
BTC (Bitcoin) - 市值最大的加密货币
ETH (Ethereum) - 第二大加密货币，智能合约平台
SOL (Solana) - 高性能公链代表
```

**稳定币监控（2个）**：
```
USDT (Tether) - 最大的稳定币
USDC (USD Coin) - 第二大稳定币
```

### 10.2 交易所数据源

**数据源限定（2个）**：
- **Binance**: 主数据源（现货、期货、资金费率、爆仓数据、深度数据）
- **Coinbase**: 补充数据源（现货价格、机构数据、ETF相关）

### 10.3 数据采集深度

| 数据类型 | BTC | ETH | SOL | 更新频率 |
|---------|-----|-----|-----|----------|
| 现货价格 | ✓ | ✓ | ✓ | 100ms |
| K线数据 | 1m-1M | 1m-1M | 1m-1D | 实时 |
| 深度数据 | 50档 | 50档 | 20档 | 1秒 |
| 资金费率 | ✓ | ✓ | ✓ | 1分钟 |
| 持仓量 | ✓ | ✓ | ✓ | 5分钟 |
| 爆仓数据 | ✓ | ✓ | ✓ | 实时 |
| 大额转账 | >50 BTC | >500 ETH | >5000 SOL | 实时 |
| 技术指标 | 全部 | 全部 | 全部 | 1分钟 |

### 10.4 DeFi协议范围（仅监控BTC/ETH/SOL相关）

**借贷协议（Ethereum主网）**：
- Aave V3 - 仅监控ETH、WBTC
- Compound V3 - 仅监控ETH、WBTC
- MakerDAO - 仅监控ETH抵押池

**Solana DeFi（新增）**：
- Marinade Finance - SOL质押
- Solend - SOL借贷

### 10.5 数据展示优化

**专注度提升**：
- 每个币种独立仪表盘页面
- 深度数据展示（50档盘口）
- 多时间框架同时展示（1m, 5m, 15m, 1h, 4h, 1d）
- 更多技术指标（RSI, MACD, Bollinger, Volume Profile等）

### 10.6 预警阈值（按币种定制）

```javascript
const alertThresholds = {
  // 市场情绪预警
  sentiment: {
    fearGreed: {
      extremeFear: 20,      // <20 极度恐慌
      extremeGreed: 80,     // >80 极度贪婪
      rapidChange: 15       // 24h变化>15点
    },
    etfFlow: {
      largeInflow: 300_000_000,   // 单日流入>$300M
      largeOutflow: -300_000_000, // 单日流出>$300M
      weeklyInflow: 1_000_000_000 // 周流入>$1B
    }
  },
  
  // BTC专属预警
  BTC: {
    priceChange: { 
      rapid: 2,    // 5分钟2%
      daily: 5     // 24小时5%
    },
    fundingRate: {
      high: 0.1,   // >0.1%
      low: -0.05   // <-0.05%
    },
    largeTransfer: 50,  // >50 BTC
    liquidation: 10_000_000  // >$10M
  },
  
  // ETH专属预警
  ETH: {
    priceChange: { 
      rapid: 3,    // 5分钟3%
      daily: 8     // 24小时8%
    },
    fundingRate: {
      high: 0.15,  // >0.15%
      low: -0.08   // <-0.08%
    },
    largeTransfer: 500,  // >500 ETH
    liquidation: 5_000_000,  // >$5M
    gasPrice: 100  // >100 Gwei
  },
  
  // SOL专属预警
  SOL: {
    priceChange: { 
      rapid: 5,    // 5分钟5%
      daily: 12    // 24小时12%
    },
    fundingRate: {
      high: 0.2,   // >0.2%
      low: -0.1    // <-0.1%
    },
    largeTransfer: 5000,  // >5000 SOL
    liquidation: 2_000_000,  // >$2M
    tps: 1000  // TPS<1000 性能问题
  }
}
```

### 10.7 性能优化（精简后）

| 指标 | 原计划 | 精简后 | 提升 |
|------|--------|--------|------|
| API调用/分钟 | 400 | 120 | 70%↓ |
| 数据存储 | ~10GB/月 | ~3GB/月 | 70%↓ |
| WebSocket连接 | 10+ | 3-5 | 50%↓ |
| 页面加载 | <3秒 | <1.5秒 | 50%↓ |
| 内存占用 | ~500MB | ~200MB | 60%↓ |

### 10.8 专属功能（3币种深度分析 + 市场情绪）

**市场情绪综合分析**：
- 恐慌贪婪指数实时监控
- ETF资金流向追踪（11只ETF全覆盖）
- 情绪与价格相关性分析
- 历史情绪极值回测

**BTC专属**：
- 矿工数据（哈希率、难度、矿工余额）
- 机构持仓（GBTC、ETF总持仓量）
- 链上指标（UTXO、长短期持有者）
- ETF资金流细分（按产品分析）

**ETH专属**：
- Gas费用监控
- ETH2.0质押数据
- Layer2数据（Arbitrum、Optimism）
- DeFi TVL变化

**SOL专属**：
- 验证者数据
- TPS实时监控
- 生态项目TVL
- NFT市场活跃度

---

## 文档更新记录

| 版本 | 日期 | 更新内容 | 更新人 |
|------|------|----------|--------|
| V1.0 | 2024-12 | 初始版本 | - |
| V1.1 | 2024-12 | 精简数据范围：交易所限定为Binance/Coinbase，币种限定为9个核心币种，DeFi限定为Ethereum链3个协议 | - |
| V1.2 | 2024-12 | 进一步精简至3个核心币种（BTC/ETH/SOL），深化每个币种的数据深度和分析维度 | - |
| V1.3 | 2024-12 | 新增恐慌贪婪指数模块和美国现货ETF资金流向监控，强化市场情绪分析功能 | - |
| V1.4 | 2024-12 | **新增用户故事集成**：为每个功能模块添加详细用户故事，包含用户角色、需求描述和验收标准，共计12个用户故事 | BMad Master |

## PRD文档同步流程

### 流程说明
为确保所有需求变更都能及时同步到PRD文档，建立以下工作流程：

1. **需求变更识别**: 任何用户故事的新增、修改或删除
2. **PRD更新**: 立即更新PRD文档相应章节
3. **版本控制**: 更新文档版本号和更新记录
4. **变更通知**: 通知相关stakeholders文档已更新

### 变更类型
- **功能新增**: 添加新的用户故事和对应功能描述
- **功能修改**: 更新现有用户故事的验收标准或描述
- **功能删除**: 移除不需要的用户故事并更新相关章节
- **优先级调整**: 更新用户故事优先级排序

这样可以确保PRD文档始终是最新和准确的项目需求文档。